(function(e){function t(t){for(var r,i,o=t[0],u=t[1],l=t[2],s=0,h=[];s<o.length;s++)i=o[s],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&h.push(a[i][0]),a[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);f&&f(t);while(h.length)h.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,i=1;i<n.length;i++){var u=n[i];0!==a[u]&&(r=!1)}r&&(c.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},c=[];function i(e){return o.p+"js/"+({about:"about"}[e]||e)+"."+{about:"bdd1610e"}[e]+".js"}function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=a[e]=[t,r]}));t.push(n[2]=r);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,o.nc&&u.setAttribute("nonce",o.nc),u.src=i(e);var l=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(s);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+c+")",l.name="ChunkLoadError",l.type=r,l.request=c,n[1](l)}a[e]=void 0}};var s=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var s=0;s<u.length;s++)t(u[s]);var f=l;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"034f":function(e,t,n){"use strict";var r=n("85ec"),a=n.n(r);a.a},"85ec":function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r,a=n("2b0e"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],o={name:"app",components:{}},u=o,l=(n("034f"),n("2877")),s=Object(l["a"])(u,c,i,!1,null,null,null),f=s.exports,h=(n("d3b7"),n("8c4f")),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[n("el-option",{attrs:{label:"模式1",value:e.PracticeMode.LV1}}),n("el-option",{attrs:{label:"大调五声音阶",value:e.PracticeMode.MajorPentatonic}})],1),n("p",[e._v(e._s(e.lickSignature))]),n("p",[e._v(e._s(e.lickSignatureInIonicMode))]),n("el-button",{on:{click:e.reGenerateLick}},[e._v("点我生成lick")])],1)},b=[],v=(n("99af"),n("4160"),n("a15b"),n("d81d"),n("25f0"),n("159b"),n("6611"),n("450d"),n("e772")),d=n.n(v),j=(n("1f1a"),n("4e4b")),m=n.n(j),O=(n("10cb"),n("f3ad")),g=n.n(O),w=(n("1951"),n("eedf")),y=n.n(w),k=(n("96cf"),n("1da1")),M=n("2909"),P=n("d4ec"),S=n("bee2"),E=n("262e"),x=n("2caf"),C=n("9ab4"),I=n("60a3"),T=(n("c740"),n("fb6a"),n("b0c0"),n("a9e3"),n("b64b"),n("6062"),n("3ca3"),n("2ca0"),n("ddb0"),n("ade3"));(function(e){e["C"]="C",e["D"]="D",e["E"]="E",e["F"]="F",e["G"]="G",e["A"]="A",e["B"]="B"})(r||(r={}));var _=function(){function e(t){Object(P["a"])(this,e),this.pitch="string"===typeof t?e.getPitchOfNote(t):Number(t)}return Object(S["a"])(e,[{key:"toString",value:function(e){var t,n=this.pitch%12,a=Math.floor(this.pitch/12)+1,c=(t={},Object(T["a"])(t,r.C,0),Object(T["a"])(t,r.D,2),Object(T["a"])(t,r.E,4),Object(T["a"])(t,r.F,5),Object(T["a"])(t,r.G,7),Object(T["a"])(t,r.A,9),Object(T["a"])(t,r.B,11),t),i=Object.keys(c).map((function(e){return{name:e,value:c[e]}})).sort((function(e,t){return e.value-t.value})),o=i.findIndex((function(e){return n<=e.value})),u=!1;i[o].value>n&&(o--,u=!0);var l=i[o].name;return"tonejs"===e?"".concat(l).concat(u?"#":"").concat(a):"".concat(u?"#":"").concat(l).concat(a)}},{key:"minus",value:function(t){return new e(this.pitch-t)}},{key:"add",value:function(t){return new e(this.pitch+t)}}],[{key:"getPitchOfNote",value:function(e){var t,n=e.startsWith("b"),a=e.startsWith("#"),c=e.slice(n||a?1:0),i=c[0],o=new Set(Object.keys(r));if(!o.has(i))throw new Error("invalid note name ".concat(i));var u=Number(c.slice(1)),l=new Set([1,2,3,4,5,6,7]);if(!l.has(u))throw new Error("invalid note level ".concat(u));var s=(t={},Object(T["a"])(t,r.C,0),Object(T["a"])(t,r.D,2),Object(T["a"])(t,r.E,4),Object(T["a"])(t,r.F,5),Object(T["a"])(t,r.G,7),Object(T["a"])(t,r.A,9),Object(T["a"])(t,r.B,11),t);return 12*(u-1)+s[i]+(a?1:n?-1:0)}}]),e}();function L(e,t){return e.pitch<t.pitch?L(new _(e.pitch+Math.ceil((t.pitch-e.pitch)/12)),t):(e.pitch-t.pitch)%12}var A,B=n("5e54"),D=n("e8b3"),F=n("5e1b");n("4de4"),n("c975");function G(e,t){return(e%t+t)%t}(function(e){e[e["MajorPentaTonic"]=0]="MajorPentaTonic",e[e["MinorPentaTonic"]=1]="MinorPentaTonic",e[e["MixoLydian"]=2]="MixoLydian",e[e["Phrygian"]=3]="Phrygian",e[e["Blues"]=4]="Blues",e[e["Dorian"]=5]="Dorian",e[e["Ionian"]=6]="Ionian",e[e["Aeolian"]=7]="Aeolian"})(A||(A={}));var V,N=function(){function e(t,n){Object(P["a"])(this,e),this.mode=n,this.tonic=t}return Object(S["a"])(e,[{key:"nextTone",value:function(e){return this.jumpTone(e,1)}},{key:"previousTone",value:function(e){return this.jumpTone(e,-1)}}]),e}(),R=function(e){Object(E["a"])(n,e);var t=Object(x["a"])(n);function n(e){return Object(P["a"])(this,n),t.call(this,e,A.Ionian)}return Object(S["a"])(n,[{key:"getSignatureInScale",value:function(e){if(e.pitch<this.tonic.pitch)return this.getSignatureInScale(e.add(12));var t=(e.pitch-this.tonic.pitch)%12;if(this.mode!==A.Ionian)throw new Error("unknown mode: ".concat(this.mode));var n={0:"1",1:"b2",2:"2",3:"b3",4:"3",5:"4",6:"b5",7:"5",8:"b6",9:"6",10:"b7",11:"7"};return n[t]}},{key:"isInScale",value:function(e){var t=G(e.pitch-this.tonic.pitch,12);return this.mode===A.Ionian&&[0,2,4,5,7,9,11].indexOf(t)>-1}},{key:"jumpTone",value:function(e,t){if(!this.isInScale(e))throw new Error("your note: ".concat(e," is not in scale"));var n=[0,2,4,5,7,9,11].filter((function(t){return new _(e.pitch+t).pitch<new _("C6").pitch})),r=n.indexOf(L(e,this.tonic)),a=this.tonic.add(12*Math.floor((r+t)/n.length)+n[G(r+t,n.length)]);return a}}]),n}(N);function $(e,t){var n=[t instanceof _?t:new _(t)],r=function(){var e=n[n.length-1],t=[-12,12,7,-7,5,-5].filter((function(t){return e.pitch+t>new _("C1").pitch&&e.pitch+t<new _("C7").pitch}));n.push(e.add(t[Math.floor(Math.random()*t.length)]))};while(n.length<e)r();return n}function H(e,t){var n=[t instanceof _?t:new _(t)],r=new R(n[0]);while(n.length<e){var a=n[n.length-1],c=[0,-1,1,-2,2,-3,3];n.push(r.jumpTone(a,c[Math.floor(Math.random()*c.length)]))}return n}(function(e){e[e["LV1"]=0]="LV1",e[e["MajorPentatonic"]=1]="MajorPentatonic"})(V||(V={}));var J=function(e){Object(E["a"])(n,e);var t=Object(x["a"])(n);function n(){var e;return Object(P["a"])(this,n),e=t.apply(this,arguments),e.lick=[new _("C3"),new _("D3"),new _("E3"),new _("F3"),new _("G3"),new _("A3"),new _("B3"),new _("C4")],e.PracticeMode=V,e.value=V.LV1,e.sampler=new B["a"]({urls:Object(D["a"])([].concat(Object(M["a"])(Object(F["a"])(1,8).map((function(e){return"C".concat(e)}))),Object(M["a"])(Object(F["a"])(1,9).map((function(e){return"F#".concat(e)})))),[].concat(Object(M["a"])(Object(F["a"])(1,8).map((function(e){return"C".concat(e,"v10.ogg")}))),Object(M["a"])(Object(F["a"])(1,9).map((function(e){return"Fs".concat(e,"v10.ogg")}))))),release:1,baseUrl:"/piano/"}).toDestination(),e}return Object(S["a"])(n,[{key:"playLick",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,B["b"]();case 2:t=B["c"](),this.lick.forEach((function(e,r){n.sampler.triggerAttackRelease(e.toString("tonejs"),1,t+.5*r)}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"reGenerateLick",value:function(){this.value===V.LV1?this.lick=$(6,"C4"):this.value===V.MajorPentatonic&&(this.lick=H(6,"C4")),this.playLick()}},{key:"lickSignature",get:function(){return this.lick.map((function(e){return e.toString()})).join(" ")}},{key:"lickSignatureInIonicMode",get:function(){if(0===this.lick.length)return"";var e=new R(this.lick[0]);return this.lick.map((function(t){return e.getSignatureInScale(t)})).join(" ")}}]),n}(I["b"]);J=Object(C["b"])([Object(I["a"])({name:"Home",components:{ElButton:y.a,ElInput:g.a,ElSelect:m.a,ElOption:d.a},created:function(){var e=new R(new _("C4"));console.log(e.jumpTone(new _("F4"),-1))}})],J);var W=J,q=W,U=Object(l["a"])(q,p,b,!1,null,null,null),z=U.exports;a["default"].use(h["a"]);var K=[{path:"/",name:"Home",component:z},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],Q=new h["a"]({routes:K}),X=Q;a["default"].use(y.a),a["default"].config.productionTip=!1,new a["default"]({router:X,render:function(e){return e(f)}}).$mount("#app")}});
//# sourceMappingURL=app.9b338ef6.js.map